(() => {
    const CHECK_INTERVAL = 5;
    const NIKOCAL_ALARM = 'nikocal_alarm';
    const NIKOCAL_NOTIFICATION = 'nikocal_nitification';
    const NIKOCAL_URL = 'http://172.24.212.83:3001/';
    const KEY_NIKOCAL_DATE = 'nikocal_date';
    const NOTIFY_NIKOCAL_HOUR = 18;
    const NOTIFY_NIKOCAL_MINUTE = 50;
    const NOTIFY_NIKOCAL_SECOND = 0;
    function show() {
        chrome.browserAction.setIcon({ path: 'icon1.png' });
        chrome.browserAction.setBadgeText({ text: 'open' });
        chrome.browserAction.setBadgeBackgroundColor({ color: [200, 0, 0, 255] });
    }
    function hide() {
        chrome.browserAction.setIcon({ path: 'icon2.png' });
        chrome.browserAction.setBadgeText({ text: '' });
    }
    /**
     * 取得した日で新しいデータ作成
     */
    function getNewNicoCalData() {
        var date = new Date();
        date.setHours(NOTIFY_NIKOCAL_HOUR);
        date.setMinutes(NOTIFY_NIKOCAL_MINUTE);
        date.setSeconds(NOTIFY_NIKOCAL_SECOND);
        return {
            notifyDate: date.getTime(),
            isNotify: false
        };
    }
    function getNikoCalDataAsyc() {
        return new Promise((resolve) => {
            chrome.storage.local.get('nikocal_date', (items) => {
                var nikocalData = items['nikocal_date'];
                if (!nikocalData) {
                    nikocalData = getNewNicoCalData();
                    setNikoCalDataAsyc(nikocalData);
                }
                resolve(nikocalData);
            });
        });
    }
    function setNikoCalDataAsyc(nikocalData) {
        chrome.storage.local.set({
            'nikocal_date': nikocalData
        });
    }
    function onOpenNikoCal() {
        getNikoCalDataAsyc().
            then((nikocalData) => {
            if (nikocalData.notifyDate < Date.now()) {
                nikocalData.isNotify = true;
                setNikoCalDataAsyc(nikocalData);
            }
        });
    }
    function showNikocalNotification() {
        chrome.notifications.create(NIKOCAL_NOTIFICATION, {
            type: 'basic',
            iconUrl: 'icon2.png',
            title: 'ニコニコカレンダーよりお知らせ',
            message: 'ニコニコカレンダーの入力お願いします:)'
        });
    }
    // function showWBSNotification() {
    //   chrome.notifications.create({
    //     type: 'basic',
    //     iconUrl: 'icon2.png',
    //     title: 'ニコニコカレンダーよりお知らせ',
    //     message: 'TimeProとWBSの入力はした？'
    //   });
    //   chrome.notifications.onClicked.addListener((notificationId: string) => {
    //     chrome.tabs.create({
    //       url: 'http://timepro/xgweb/login.asp/'
    //     });
    //     chrome.notifications.clear(notificationId);
    //   });
    // }
    function checkOpenNikoCal() {
        getNikoCalDataAsyc().
            then((nikocalData) => {
            var notifyDate = new Date(nikocalData.notifyDate);
            var notifyMonth = notifyDate.getMonth();
            var notifyDay = notifyDate.getDate();
            var currentDate = new Date();
            var currentMonth = currentDate.getMonth();
            var currentDay = currentDate.getDate();
            if (notifyMonth != currentMonth || notifyDay < currentDay) {
                nikocalData = getNewNicoCalData();
                setNikoCalDataAsyc(nikocalData);
                hide();
            }
            else if (notifyDate < currentDate) {
                show();
                if (!nikocalData.isNotify) {
                    showNikocalNotification();
                }
            }
            else {
                hide();
            }
        });
    }
    /**
     * メニューのアイコンクリックイベント付与
     */
    chrome.browserAction.onClicked.addListener(() => {
        onOpenNikoCal();
        chrome.tabs.create({
            url: NIKOCAL_URL
        });
    });
    /**
     * Notificationにイベント付与
     */
    chrome.notifications.onClicked.addListener((notificationId) => {
        switch (notificationId) {
            case NIKOCAL_NOTIFICATION:
                chrome.tabs.create({
                    url: NIKOCAL_URL
                });
                onOpenNikoCal();
                break;
            default:
                break;
        }
    });
    chrome.alarms.clear(NIKOCAL_ALARM);
    chrome.alarms.create(NIKOCAL_ALARM, { periodInMinutes: CHECK_INTERVAL });
    chrome.alarms.onAlarm.addListener(function (alarm) {
        if (alarm.name === NIKOCAL_ALARM) {
            checkOpenNikoCal();
        }
    });
    checkOpenNikoCal();
})();

//# sourceMappingURL=data:application/json;base64,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QUNyQixDQUFDO0lBQ0gsQ0FBQyxDQUFDLENBQUM7SUFDSCxnQkFBZ0IsRUFBRSxDQUFDO0FBQ3JCLENBQUMsQ0FBQyxFQUFFLENBQUMiLCJmaWxlIjoiYmFja2dyb3VuZC5qcyIsInNvdXJjZXNDb250ZW50IjpbIigoKSA9PiB7XHJcbiAgY29uc3QgQ0hFQ0tfSU5URVJWQUwgPSA1O1xyXG4gIFxyXG4gIGNvbnN0IE5JS09DQUxfQUxBUk0gPSAnbmlrb2NhbF9hbGFybSc7XHJcbiAgXHJcbiAgY29uc3QgTklLT0NBTF9OT1RJRklDQVRJT04gPSAnbmlrb2NhbF9uaXRpZmljYXRpb24nO1xyXG4gIGNvbnN0IE5JS09DQUxfVVJMID0gJ2h0dHA6Ly8xNzIuMjQuMjEyLjgzOjMwMDEvJztcclxuICBjb25zdCBLRVlfTklLT0NBTF9EQVRFID0gJ25pa29jYWxfZGF0ZSdcclxuICBjb25zdCBOT1RJRllfTklLT0NBTF9IT1VSID0gMTg7XHJcbiAgY29uc3QgTk9USUZZX05JS09DQUxfTUlOVVRFID0gNTA7XHJcbiAgY29uc3QgTk9USUZZX05JS09DQUxfU0VDT05EID0gMDtcclxuXHJcbiAgLy8gY29uc3QgTk9USUZZX1RJTUVQUk9fV0VFSyA9IDE7XHJcbiAgLy8gY29uc3QgTk9USUZZX1RJTUVQUk9fSE9VUiA9IDEwO1xyXG4gIC8vIGNvbnN0IE5PVElGWV9USU1FUFJPX01JTlVURSA9IDA7XHJcbiAgLy8gY29uc3QgTk9USUZZX1RJTUVQUk9fU0VDT05EID0gMDtcclxuICBcclxuICBpbnRlcmZhY2UgSU5pa29uaWtvRGF0YSB7XHJcbiAgICBub3RpZnlEYXRlOiBudW1iZXI7XHJcbiAgICBpc05vdGlmeTogYm9vbGVhbjtcclxuICB9XHJcbiAgXHJcbiAgZnVuY3Rpb24gc2hvdygpIHtcclxuICAgIGNocm9tZS5icm93c2VyQWN0aW9uLnNldEljb24oeyBwYXRoOiAnaWNvbjEucG5nJyB9KTtcclxuICAgIGNocm9tZS5icm93c2VyQWN0aW9uLnNldEJhZGdlVGV4dCh7IHRleHQ6ICdvcGVuJyB9KTtcclxuICAgIGNocm9tZS5icm93c2VyQWN0aW9uLnNldEJhZGdlQmFja2dyb3VuZENvbG9yKHsgY29sb3I6IFsyMDAsIDAsIDAsIDI1NV0gfSk7XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBoaWRlKCkge1xyXG4gICAgY2hyb21lLmJyb3dzZXJBY3Rpb24uc2V0SWNvbih7IHBhdGg6ICdpY29uMi5wbmcnIH0pO1xyXG4gICAgY2hyb21lLmJyb3dzZXJBY3Rpb24uc2V0QmFkZ2VUZXh0KHsgdGV4dDogJycgfSk7XHJcbiAgfVxyXG4gIFxyXG4gIC8qKlxyXG4gICAqIOWPluW+l+OBl+OBn+aXpeOBp+aWsOOBl+OBhOODh+ODvOOCv+S9nOaIkFxyXG4gICAqL1xyXG4gIGZ1bmN0aW9uIGdldE5ld05pY29DYWxEYXRhKCk6IElOaWtvbmlrb0RhdGEge1xyXG4gICAgdmFyIGRhdGUgPSBuZXcgRGF0ZSgpO1xyXG4gICAgZGF0ZS5zZXRIb3VycyhOT1RJRllfTklLT0NBTF9IT1VSKTtcclxuICAgIGRhdGUuc2V0TWludXRlcyhOT1RJRllfTklLT0NBTF9NSU5VVEUpO1xyXG4gICAgZGF0ZS5zZXRTZWNvbmRzKE5PVElGWV9OSUtPQ0FMX1NFQ09ORCk7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBub3RpZnlEYXRlOiBkYXRlLmdldFRpbWUoKSxcclxuICAgICAgaXNOb3RpZnk6IGZhbHNlXHJcbiAgICB9O1xyXG4gIH0gXHJcbiAgXHJcbiAgZnVuY3Rpb24gZ2V0Tmlrb0NhbERhdGFBc3ljKCk6IFByb21pc2U8SU5pa29uaWtvRGF0YT4ge1xyXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlPElOaWtvbmlrb0RhdGE+KChyZXNvbHZlOiAobmlrb2NhbERhdGE6IElOaWtvbmlrb0RhdGEpID0+IHZvaWQpID0+IHtcclxuICAgICAgY2hyb21lLnN0b3JhZ2UubG9jYWwuZ2V0KCduaWtvY2FsX2RhdGUnLCAoaXRlbXM6IHsgW2tleTogc3RyaW5nXTogYW55IH0pID0+IHtcclxuICAgICAgICB2YXIgbmlrb2NhbERhdGEgPSBpdGVtc1snbmlrb2NhbF9kYXRlJ107XHJcbiAgICAgICAgaWYoIW5pa29jYWxEYXRhKSB7XHJcbiAgICAgICAgICBuaWtvY2FsRGF0YSA9IGdldE5ld05pY29DYWxEYXRhKCk7XHJcbiAgICAgICAgICBzZXROaWtvQ2FsRGF0YUFzeWMobmlrb2NhbERhdGEpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXNvbHZlKG5pa29jYWxEYXRhKTtcclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuICB9XHJcbiAgXHJcbiAgZnVuY3Rpb24gc2V0Tmlrb0NhbERhdGFBc3ljKG5pa29jYWxEYXRhOiBJTmlrb25pa29EYXRhKTogdm9pZCB7XHJcbiAgICBjaHJvbWUuc3RvcmFnZS5sb2NhbC5zZXQoe1xyXG4gICAgICAnbmlrb2NhbF9kYXRlJzogbmlrb2NhbERhdGFcclxuICAgIH0pO1xyXG4gIH1cclxuICBcclxuICBmdW5jdGlvbiBvbk9wZW5OaWtvQ2FsKCk6IHZvaWQgeyBcclxuICAgIGdldE5pa29DYWxEYXRhQXN5YygpLlxyXG4gICAgICB0aGVuKChuaWtvY2FsRGF0YTogSU5pa29uaWtvRGF0YSkgPT4ge1xyXG4gICAgICAgIGlmIChuaWtvY2FsRGF0YS5ub3RpZnlEYXRlIDwgRGF0ZS5ub3coKSkge1xyXG4gICAgICAgICAgbmlrb2NhbERhdGEuaXNOb3RpZnkgPSB0cnVlO1xyXG4gICAgICAgICAgc2V0Tmlrb0NhbERhdGFBc3ljKG5pa29jYWxEYXRhKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG4gIH1cclxuICBcclxuICBmdW5jdGlvbiBzaG93Tmlrb2NhbE5vdGlmaWNhdGlvbigpIHtcclxuICAgIGNocm9tZS5ub3RpZmljYXRpb25zLmNyZWF0ZShcclxuICAgICAgTklLT0NBTF9OT1RJRklDQVRJT04sXHJcbiAgICAgIHtcclxuICAgICAgICB0eXBlOiAnYmFzaWMnLFxyXG4gICAgICAgIGljb25Vcmw6ICdpY29uMi5wbmcnLFxyXG4gICAgICAgIHRpdGxlOiAn44OL44Kz44OL44Kz44Kr44Os44Oz44OA44O844KI44KK44GK55+l44KJ44GbJyxcclxuICAgICAgICBtZXNzYWdlOiAn44OL44Kz44OL44Kz44Kr44Os44Oz44OA44O844Gu5YWl5Yqb44GK6aGY44GE44GX44G+44GZOiknXHJcbiAgICAgIH1cclxuICAgICk7XHJcbiAgfVxyXG5cclxuICAvLyBmdW5jdGlvbiBzaG93V0JTTm90aWZpY2F0aW9uKCkge1xyXG4gIC8vICAgY2hyb21lLm5vdGlmaWNhdGlvbnMuY3JlYXRlKHtcclxuICAvLyAgICAgdHlwZTogJ2Jhc2ljJyxcclxuICAvLyAgICAgaWNvblVybDogJ2ljb24yLnBuZycsXHJcbiAgLy8gICAgIHRpdGxlOiAn44OL44Kz44OL44Kz44Kr44Os44Oz44OA44O844KI44KK44GK55+l44KJ44GbJyxcclxuICAvLyAgICAgbWVzc2FnZTogJ1RpbWVQcm/jgahXQlPjga7lhaXlipvjga/jgZfjgZ/vvJ8nXHJcbiAgLy8gICB9KTtcclxuICAvLyAgIGNocm9tZS5ub3RpZmljYXRpb25zLm9uQ2xpY2tlZC5hZGRMaXN0ZW5lcigobm90aWZpY2F0aW9uSWQ6IHN0cmluZykgPT4ge1xyXG4gIC8vICAgICBjaHJvbWUudGFicy5jcmVhdGUoe1xyXG4gIC8vICAgICAgIHVybDogJ2h0dHA6Ly90aW1lcHJvL3hnd2ViL2xvZ2luLmFzcC8nXHJcbiAgLy8gICAgIH0pO1xyXG4gIC8vICAgICBjaHJvbWUubm90aWZpY2F0aW9ucy5jbGVhcihub3RpZmljYXRpb25JZCk7XHJcbiAgLy8gICB9KTtcclxuICAvLyB9XHJcbiAgXHJcbiAgZnVuY3Rpb24gY2hlY2tPcGVuTmlrb0NhbCgpIHtcclxuICAgIGdldE5pa29DYWxEYXRhQXN5YygpLlxyXG4gICAgICB0aGVuKChuaWtvY2FsRGF0YTogSU5pa29uaWtvRGF0YSkgPT4ge1xyXG4gICAgICAgIHZhciBub3RpZnlEYXRlID0gbmV3IERhdGUobmlrb2NhbERhdGEubm90aWZ5RGF0ZSk7XHJcbiAgICAgICAgdmFyIG5vdGlmeU1vbnRoID0gbm90aWZ5RGF0ZS5nZXRNb250aCgpO1xyXG4gICAgICAgIHZhciBub3RpZnlEYXkgPSBub3RpZnlEYXRlLmdldERhdGUoKTtcclxuICAgICAgICB2YXIgY3VycmVudERhdGUgPSBuZXcgRGF0ZSgpO1xyXG4gICAgICAgIHZhciBjdXJyZW50TW9udGggPSBjdXJyZW50RGF0ZS5nZXRNb250aCgpO1xyXG4gICAgICAgIHZhciBjdXJyZW50RGF5ID0gY3VycmVudERhdGUuZ2V0RGF0ZSgpO1xyXG4gICAgICAgIGlmKG5vdGlmeU1vbnRoICE9IGN1cnJlbnRNb250aCB8fCBub3RpZnlEYXkgPCBjdXJyZW50RGF5KSB7XHJcbiAgICAgICAgICBuaWtvY2FsRGF0YSA9IGdldE5ld05pY29DYWxEYXRhKCk7XHJcbiAgICAgICAgICBzZXROaWtvQ2FsRGF0YUFzeWMobmlrb2NhbERhdGEpO1xyXG4gICAgICAgICAgaGlkZSgpO1xyXG4gICAgICAgIH0gZWxzZSBpZihub3RpZnlEYXRlIDwgY3VycmVudERhdGUpIHtcclxuICAgICAgICAgIHNob3coKTtcclxuICAgICAgICAgIGlmKCFuaWtvY2FsRGF0YS5pc05vdGlmeSkge1xyXG4gICAgICAgICAgICBzaG93Tmlrb2NhbE5vdGlmaWNhdGlvbigpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBoaWRlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOODoeODi+ODpeODvOOBruOCouOCpOOCs+ODs+OCr+ODquODg+OCr+OCpOODmeODs+ODiOS7mOS4jlxyXG4gICAqLyAgXHJcbiAgY2hyb21lLmJyb3dzZXJBY3Rpb24ub25DbGlja2VkLmFkZExpc3RlbmVyKCgpID0+IHtcclxuICAgICAgb25PcGVuTmlrb0NhbCgpO1xyXG4gICAgICBjaHJvbWUudGFicy5jcmVhdGUoe1xyXG4gICAgICAgIHVybDogTklLT0NBTF9VUkxcclxuICAgICAgfSk7XHJcbiAgfSk7XHJcbiAgXHJcbiAgLyoqXHJcbiAgICogTm90aWZpY2F0aW9u44Gr44Kk44OZ44Oz44OI5LuY5LiOXHJcbiAgICovXHJcbiAgY2hyb21lLm5vdGlmaWNhdGlvbnMub25DbGlja2VkLmFkZExpc3RlbmVyKChub3RpZmljYXRpb25JZDogc3RyaW5nKSA9PiB7XHJcbiAgICBzd2l0Y2ggKG5vdGlmaWNhdGlvbklkKSB7IFxyXG4gICAgICBjYXNlIE5JS09DQUxfTk9USUZJQ0FUSU9OOlxyXG4gICAgICAgIGNocm9tZS50YWJzLmNyZWF0ZSh7XHJcbiAgICAgICAgICB1cmw6IE5JS09DQUxfVVJMXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgb25PcGVuTmlrb0NhbCgpO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBkZWZhdWx0OlxyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgfVxyXG4gIH0pO1xyXG5cclxuICBjaHJvbWUuYWxhcm1zLmNsZWFyKE5JS09DQUxfQUxBUk0pOyAgXHJcbiAgY2hyb21lLmFsYXJtcy5jcmVhdGUoTklLT0NBTF9BTEFSTSwgeyBwZXJpb2RJbk1pbnV0ZXM6IENIRUNLX0lOVEVSVkFMIH0pO1xyXG4gIGNocm9tZS5hbGFybXMub25BbGFybS5hZGRMaXN0ZW5lcihmdW5jdGlvbihhbGFybTogY2hyb21lLmFsYXJtcy5BbGFybSkge1xyXG4gICAgaWYgKGFsYXJtLm5hbWUgPT09IE5JS09DQUxfQUxBUk0pIHtcclxuICAgICAgY2hlY2tPcGVuTmlrb0NhbCgpO1xyXG4gICAgfVxyXG4gIH0pO1xyXG4gIGNoZWNrT3Blbk5pa29DYWwoKTtcclxufSkoKTtcclxuXHJcbiJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==
