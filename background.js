(() => {
    const CHECK_INTERVAL = 5;
    const KEY_NIKOCAL_DATE = 'nikocal_date';
    const NOTIFY_NIKOCAL_HOUR = 18;
    const NOTIFY_NIKOCAL_MINUTE = 50;
    const NOTIFY_NIKOCAL_SECOND = 0;
    const NOTIFY_TIMEPRO_WEEK = 1;
    const NOTIFY_TIMEPRO_HOUR = 10;
    const NOTIFY_TIMEPRO_MINUTE = 0;
    const NOTIFY_TIMEPRO_SECOND = 0;
    function show() {
        chrome.browserAction.setIcon({ path: 'icon1.png' });
        chrome.browserAction.setBadgeText({ text: 'open' });
        chrome.browserAction.setBadgeBackgroundColor({ color: [200, 0, 0, 255] });
    }
    function hide() {
        chrome.browserAction.setIcon({ path: 'icon2.png' });
        chrome.browserAction.setBadgeText({ text: '' });
    }
    /**
     * 取得した日で新しいデータ作成
     */
    function getNewNicoCalData() {
        var date = new Date();
        date.setHours(NOTIFY_NIKOCAL_HOUR);
        date.setMinutes(NOTIFY_NIKOCAL_MINUTE);
        date.setSeconds(NOTIFY_NIKOCAL_SECOND);
        return {
            notifyDate: date.getTime(),
            isNotify: false
        };
    }
    function getNikoCalDataAsyc() {
        return new Promise((resolve) => {
            chrome.storage.local.get('nikocal_date', (items) => {
                var nikocalData = items['nikocal_date'];
                if (!nikocalData) {
                    nikocalData = getNewNicoCalData();
                    setNikoCalDataAsyc(nikocalData);
                }
                resolve(nikocalData);
            });
        });
    }
    function setNikoCalDataAsyc(nikocalData) {
        chrome.storage.local.set({
            'nikocal_date': nikocalData
        });
    }
    function showNikocalNotification() {
        chrome.notifications.create({
            type: 'basic',
            iconUrl: 'icon2.png',
            title: 'ニコニコカレンダーよりお知らせ',
            message: 'そろそろ入力したら？'
        });
        chrome.notifications.onClicked.addListener((notificationId) => {
            chrome.tabs.create({
                url: 'http://172.24.212.83:3001/'
            });
            chrome.notifications.clear(notificationId);
            getNikoCalDataAsyc().
                then((nikocalData) => {
                nikocalData.isNotify = true;
                setNikoCalDataAsyc(nikocalData);
            });
        });
    }
    function showWBSNotification() {
        chrome.notifications.create({
            type: 'basic',
            iconUrl: 'icon2.png',
            title: 'ニコニコカレンダーよりお知らせ',
            message: 'TimeProとWBSの入力はした？'
        });
        chrome.notifications.onClicked.addListener((notificationId) => {
            chrome.tabs.create({
                url: 'http://timepro/xgweb/login.asp/'
            });
            chrome.notifications.clear(notificationId);
        });
    }
    function check() {
        getNikoCalDataAsyc().
            then((nikocalData) => {
            var notifyDate = new Date(nikocalData.notifyDate);
            var notifyMonth = notifyDate.getMonth();
            var notifyDay = notifyDate.getDate();
            var currentDate = new Date();
            var currentMonth = currentDate.getMonth();
            var currentDay = currentDate.getDate();
            if (notifyMonth != currentMonth || notifyDay < currentDay) {
                nikocalData = getNewNicoCalData();
                setNikoCalDataAsyc(nikocalData);
                hide();
            }
            else if (notifyDate < currentDate) {
                show();
                if (!nikocalData.isNotify) {
                    showNikocalNotification();
                }
            }
            else {
                hide();
            }
        });
    }
    chrome.alarms.create('nikocal', { periodInMinutes: CHECK_INTERVAL });
    chrome.alarms.onAlarm.addListener(function (alarm) {
        if (alarm.name === 'nikocal') {
            check();
        }
    });
    check();
})();

//# sourceMappingURL=data:application/json;base64,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SSxVQUFVLEdBQUcsV0FBVyxDQUFDLE9BQU8sRUFBRSxDQUFDO1lBQ3ZDLEVBQUUsQ0FBQSxDQUFDLFdBQVcsSUFBSSxZQUFZLElBQUksU0FBUyxHQUFHLFVBQVUsQ0FBQyxDQUFDLENBQUM7Z0JBQ3pELFdBQVcsR0FBRyxpQkFBaUIsRUFBRSxDQUFDO2dCQUNsQyxrQkFBa0IsQ0FBQyxXQUFXLENBQUMsQ0FBQztnQkFDaEMsSUFBSSxFQUFFLENBQUM7WUFDVCxDQUFDO1lBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQSxDQUFDLFVBQVUsR0FBRyxXQUFXLENBQUMsQ0FBQyxDQUFDO2dCQUNuQyxJQUFJLEVBQUUsQ0FBQztnQkFDUCxFQUFFLENBQUEsQ0FBQyxDQUFDLFdBQVcsQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDO29CQUN6Qix1QkFBdUIsRUFBRSxDQUFDO2dCQUM1QixDQUFDO1lBQ0gsQ0FBQztZQUFDLElBQUksQ0FBQyxDQUFDO2dCQUNOLElBQUksRUFBRSxDQUFDO1lBQ1QsQ0FBQztRQUNILENBQUMsQ0FBQyxDQUFDO0lBQ1AsQ0FBQztJQUNELE1BQU0sQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDLFNBQVMsRUFBRSxFQUFFLGVBQWUsRUFBRSxjQUFjLEVBQUUsQ0FBQyxDQUFDO0lBQ3JFLE1BQU0sQ0FBQyxNQUFNLENBQUMsT0FBTyxDQUFDLFdBQVcsQ0FBQyxVQUFTLEtBQTBCO1FBQ25FLEVBQUUsQ0FBQyxDQUFDLEtBQUssQ0FBQyxJQUFJLEtBQUssU0FBUyxDQUFDLENBQUMsQ0FBQztZQUM3QixLQUFLLEVBQUUsQ0FBQztRQUNWLENBQUM7SUFDSCxDQUFDLENBQUMsQ0FBQztJQUNILEtBQUssRUFBRSxDQUFDO0FBQ1YsQ0FBQyxDQUFDLEVBQUUsQ0FBQyIsImZpbGUiOiJiYWNrZ3JvdW5kLmpzIiwic291cmNlc0NvbnRlbnQiOlsiKCgpID0+IHtcclxuICBjb25zdCBDSEVDS19JTlRFUlZBTCA9IDU7XHJcbiAgY29uc3QgS0VZX05JS09DQUxfREFURSA9ICduaWtvY2FsX2RhdGUnXHJcbiAgY29uc3QgTk9USUZZX05JS09DQUxfSE9VUiA9IDE4O1xyXG4gIGNvbnN0IE5PVElGWV9OSUtPQ0FMX01JTlVURSA9IDUwO1xyXG4gIGNvbnN0IE5PVElGWV9OSUtPQ0FMX1NFQ09ORCA9IDA7XHJcblxyXG4gIGNvbnN0IE5PVElGWV9USU1FUFJPX1dFRUsgPSAxO1xyXG4gIGNvbnN0IE5PVElGWV9USU1FUFJPX0hPVVIgPSAxMDtcclxuICBjb25zdCBOT1RJRllfVElNRVBST19NSU5VVEUgPSAwO1xyXG4gIGNvbnN0IE5PVElGWV9USU1FUFJPX1NFQ09ORCA9IDA7XHJcbiAgXHJcbiAgaW50ZXJmYWNlIElOaWtvbmlrb0RhdGEge1xyXG4gICAgbm90aWZ5RGF0ZTogbnVtYmVyO1xyXG4gICAgaXNOb3RpZnk6IGJvb2xlYW47XHJcbiAgfVxyXG4gIFxyXG4gIGZ1bmN0aW9uIHNob3coKSB7XHJcbiAgICBjaHJvbWUuYnJvd3NlckFjdGlvbi5zZXRJY29uKHsgcGF0aDogJ2ljb24xLnBuZycgfSk7XHJcbiAgICBjaHJvbWUuYnJvd3NlckFjdGlvbi5zZXRCYWRnZVRleHQoeyB0ZXh0OiAnb3BlbicgfSk7XHJcbiAgICBjaHJvbWUuYnJvd3NlckFjdGlvbi5zZXRCYWRnZUJhY2tncm91bmRDb2xvcih7IGNvbG9yOiBbMjAwLCAwLCAwLCAyNTVdIH0pO1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gaGlkZSgpIHtcclxuICAgIGNocm9tZS5icm93c2VyQWN0aW9uLnNldEljb24oeyBwYXRoOiAnaWNvbjIucG5nJyB9KTtcclxuICAgIGNocm9tZS5icm93c2VyQWN0aW9uLnNldEJhZGdlVGV4dCh7IHRleHQ6ICcnIH0pO1xyXG4gIH1cclxuICBcclxuICAvKipcclxuICAgKiDlj5blvpfjgZfjgZ/ml6XjgafmlrDjgZfjgYTjg4fjg7zjgr/kvZzmiJBcclxuICAgKi9cclxuICBmdW5jdGlvbiBnZXROZXdOaWNvQ2FsRGF0YSgpOiBJTmlrb25pa29EYXRhIHtcclxuICAgIHZhciBkYXRlID0gbmV3IERhdGUoKTtcclxuICAgIGRhdGUuc2V0SG91cnMoTk9USUZZX05JS09DQUxfSE9VUik7XHJcbiAgICBkYXRlLnNldE1pbnV0ZXMoTk9USUZZX05JS09DQUxfTUlOVVRFKTtcclxuICAgIGRhdGUuc2V0U2Vjb25kcyhOT1RJRllfTklLT0NBTF9TRUNPTkQpO1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgbm90aWZ5RGF0ZTogZGF0ZS5nZXRUaW1lKCksXHJcbiAgICAgIGlzTm90aWZ5OiBmYWxzZVxyXG4gICAgfTtcclxuICB9IFxyXG4gIFxyXG4gIGZ1bmN0aW9uIGdldE5pa29DYWxEYXRhQXN5YygpOiBQcm9taXNlPElOaWtvbmlrb0RhdGE+IHtcclxuICAgIHJldHVybiBuZXcgUHJvbWlzZTxJTmlrb25pa29EYXRhPigocmVzb2x2ZTogKG5pa29jYWxEYXRhOiBJTmlrb25pa29EYXRhKSA9PiB2b2lkKSA9PiB7XHJcbiAgICAgIGNocm9tZS5zdG9yYWdlLmxvY2FsLmdldCgnbmlrb2NhbF9kYXRlJywgKGl0ZW1zOiB7IFtrZXk6IHN0cmluZ106IGFueSB9KSA9PiB7XHJcbiAgICAgICAgdmFyIG5pa29jYWxEYXRhID0gaXRlbXNbJ25pa29jYWxfZGF0ZSddO1xyXG4gICAgICAgIGlmKCFuaWtvY2FsRGF0YSkge1xyXG4gICAgICAgICAgbmlrb2NhbERhdGEgPSBnZXROZXdOaWNvQ2FsRGF0YSgpO1xyXG4gICAgICAgICAgc2V0Tmlrb0NhbERhdGFBc3ljKG5pa29jYWxEYXRhKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmVzb2x2ZShuaWtvY2FsRGF0YSk7XHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcbiAgfVxyXG4gIFxyXG4gIGZ1bmN0aW9uIHNldE5pa29DYWxEYXRhQXN5YyhuaWtvY2FsRGF0YTogSU5pa29uaWtvRGF0YSk6IHZvaWQge1xyXG4gICAgY2hyb21lLnN0b3JhZ2UubG9jYWwuc2V0KHtcclxuICAgICAgJ25pa29jYWxfZGF0ZSc6IG5pa29jYWxEYXRhXHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIHNob3dOaWtvY2FsTm90aWZpY2F0aW9uKCkge1xyXG4gICAgY2hyb21lLm5vdGlmaWNhdGlvbnMuY3JlYXRlKHtcclxuICAgICAgdHlwZTogJ2Jhc2ljJyxcclxuICAgICAgaWNvblVybDogJ2ljb24yLnBuZycsXHJcbiAgICAgIHRpdGxlOiAn44OL44Kz44OL44Kz44Kr44Os44Oz44OA44O844KI44KK44GK55+l44KJ44GbJyxcclxuICAgICAgbWVzc2FnZTogJ+OBneOCjeOBneOCjeWFpeWKm+OBl+OBn+OCie+8nydcclxuICAgIH0pO1xyXG4gICAgY2hyb21lLm5vdGlmaWNhdGlvbnMub25DbGlja2VkLmFkZExpc3RlbmVyKChub3RpZmljYXRpb25JZDogc3RyaW5nKSA9PiB7XHJcbiAgICAgIGNocm9tZS50YWJzLmNyZWF0ZSh7XHJcbiAgICAgICAgdXJsOiAnaHR0cDovLzE3Mi4yNC4yMTIuODM6MzAwMS8nXHJcbiAgICAgIH0pO1xyXG4gICAgICBjaHJvbWUubm90aWZpY2F0aW9ucy5jbGVhcihub3RpZmljYXRpb25JZCk7XHJcbiAgICAgIGdldE5pa29DYWxEYXRhQXN5YygpLlxyXG4gICAgICAgIHRoZW4oKG5pa29jYWxEYXRhOiBJTmlrb25pa29EYXRhKSA9PiB7XHJcbiAgICAgICAgICBuaWtvY2FsRGF0YS5pc05vdGlmeSA9IHRydWU7XHJcbiAgICAgICAgICBzZXROaWtvQ2FsRGF0YUFzeWMobmlrb2NhbERhdGEpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBzaG93V0JTTm90aWZpY2F0aW9uKCkge1xyXG4gICAgY2hyb21lLm5vdGlmaWNhdGlvbnMuY3JlYXRlKHtcclxuICAgICAgdHlwZTogJ2Jhc2ljJyxcclxuICAgICAgaWNvblVybDogJ2ljb24yLnBuZycsXHJcbiAgICAgIHRpdGxlOiAn44OL44Kz44OL44Kz44Kr44Os44Oz44OA44O844KI44KK44GK55+l44KJ44GbJyxcclxuICAgICAgbWVzc2FnZTogJ1RpbWVQcm/jgahXQlPjga7lhaXlipvjga/jgZfjgZ/vvJ8nXHJcbiAgICB9KTtcclxuICAgIGNocm9tZS5ub3RpZmljYXRpb25zLm9uQ2xpY2tlZC5hZGRMaXN0ZW5lcigobm90aWZpY2F0aW9uSWQ6IHN0cmluZykgPT4ge1xyXG4gICAgICBjaHJvbWUudGFicy5jcmVhdGUoe1xyXG4gICAgICAgIHVybDogJ2h0dHA6Ly90aW1lcHJvL3hnd2ViL2xvZ2luLmFzcC8nXHJcbiAgICAgIH0pO1xyXG4gICAgICBjaHJvbWUubm90aWZpY2F0aW9ucy5jbGVhcihub3RpZmljYXRpb25JZCk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIGNoZWNrKCkge1xyXG4gICAgZ2V0Tmlrb0NhbERhdGFBc3ljKCkuXHJcbiAgICAgIHRoZW4oKG5pa29jYWxEYXRhOiBJTmlrb25pa29EYXRhKSA9PiB7XHJcbiAgICAgICAgdmFyIG5vdGlmeURhdGUgPSBuZXcgRGF0ZShuaWtvY2FsRGF0YS5ub3RpZnlEYXRlKTtcclxuICAgICAgICB2YXIgbm90aWZ5TW9udGggPSBub3RpZnlEYXRlLmdldE1vbnRoKCk7XHJcbiAgICAgICAgdmFyIG5vdGlmeURheSA9IG5vdGlmeURhdGUuZ2V0RGF0ZSgpO1xyXG4gICAgICAgIHZhciBjdXJyZW50RGF0ZSA9IG5ldyBEYXRlKCk7XHJcbiAgICAgICAgdmFyIGN1cnJlbnRNb250aCA9IGN1cnJlbnREYXRlLmdldE1vbnRoKCk7XHJcbiAgICAgICAgdmFyIGN1cnJlbnREYXkgPSBjdXJyZW50RGF0ZS5nZXREYXRlKCk7XHJcbiAgICAgICAgaWYobm90aWZ5TW9udGggIT0gY3VycmVudE1vbnRoIHx8IG5vdGlmeURheSA8IGN1cnJlbnREYXkpIHtcclxuICAgICAgICAgIG5pa29jYWxEYXRhID0gZ2V0TmV3Tmljb0NhbERhdGEoKTtcclxuICAgICAgICAgIHNldE5pa29DYWxEYXRhQXN5YyhuaWtvY2FsRGF0YSk7XHJcbiAgICAgICAgICBoaWRlKCk7XHJcbiAgICAgICAgfSBlbHNlIGlmKG5vdGlmeURhdGUgPCBjdXJyZW50RGF0ZSkge1xyXG4gICAgICAgICAgc2hvdygpO1xyXG4gICAgICAgICAgaWYoIW5pa29jYWxEYXRhLmlzTm90aWZ5KSB7XHJcbiAgICAgICAgICAgIHNob3dOaWtvY2FsTm90aWZpY2F0aW9uKCk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIGhpZGUoKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG4gIH1cclxuICBjaHJvbWUuYWxhcm1zLmNyZWF0ZSgnbmlrb2NhbCcsIHsgcGVyaW9kSW5NaW51dGVzOiBDSEVDS19JTlRFUlZBTCB9KTtcclxuICBjaHJvbWUuYWxhcm1zLm9uQWxhcm0uYWRkTGlzdGVuZXIoZnVuY3Rpb24oYWxhcm06IGNocm9tZS5hbGFybXMuQWxhcm0pIHtcclxuICAgIGlmIChhbGFybS5uYW1lID09PSAnbmlrb2NhbCcpIHtcclxuICAgICAgY2hlY2soKTtcclxuICAgIH1cclxuICB9KTtcclxuICBjaGVjaygpO1xyXG59KSgpO1xyXG5cclxuIl0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9
